\doxysection{check\+\_\+device\+\_\+status.\+c}
\hypertarget{check__device__status_8c_source}{}\label{check__device__status_8c_source}\index{C:/Users/kemik/git/lvgl\_t113/device/check\_device\_status.c@{C:/Users/kemik/git/lvgl\_t113/device/check\_device\_status.c}}
\mbox{\hyperlink{check__device__status_8c}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00018}00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{check__device__status_8h}{check\_device\_status.h}}"{}}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00019}00019\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00030}\mbox{\hyperlink{check__device__status_8c_adc92373bd6f952b9457fa57fa8c37fd6}{00030}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{check__device__status_8c_adc92373bd6f952b9457fa57fa8c37fd6}{check\_wifi\_state}}(\textcolor{keywordtype}{char}\ *interface)\ \{}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00031}00031\ \ \ \ \ FILE\ *fp;}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00032}00032\ \ \ \ \ \textcolor{keywordtype}{char}\ operstate[10];}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00034}00034\ \ \ \ \ \textcolor{comment}{//\ 构建路径}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00035}00035\ \ \ \ \ \textcolor{keywordtype}{char}\ path[50];}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00036}00036\ \ \ \ \ snprintf(path,\ \textcolor{keyword}{sizeof}(path),\ \textcolor{stringliteral}{"{}/sys/class/net/\%s/operstate"{}},\ interface);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00038}00038\ \ \ \ \ \textcolor{comment}{//\ 打开文件读取操作状态}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00039}00039\ \ \ \ \ fp\ =\ fopen(path,\ \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00040}00040\ \ \ \ \ \textcolor{keywordflow}{if}\ (fp\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00041}00041\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}Failed\ to\ open\ operstate\ file"{}});}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00043}00043\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00045}00045\ \ \ \ \ \textcolor{comment}{//\ 读取状态}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00046}00046\ \ \ \ \ \textcolor{keywordflow}{if}\ (fgets(operstate,\ \textcolor{keyword}{sizeof}(operstate),\ fp)\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00047}00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (strncmp(operstate,\ \textcolor{stringliteral}{"{}up"{}},\ 2)\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WiFi\ interface\ \%s\ is\ up\(\backslash\)n"{}},\ interface);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ fclose(fp);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00051}00051\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WiFi\ interface\ \%s\ is\ down\(\backslash\)n"{}},\ interface);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ fclose(fp);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00055}00055\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00056}00056\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Failed\ to\ read\ WiFi\ state\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00058}00058\ \ \ \ \ \ \ \ \ fclose(fp);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00060}00060\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00062}00062\ \ \ \ \ fclose(fp);}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00063}00063\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{check__device__status_8c_source_l00064}00064\ \}}

\end{DoxyCode}
